EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
Lab8.com -- emu8086 assembler version: 4.05  
 
[ 16.06.2021  --  12:30:33 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       .model tiny                ;
[   2]    0100:                                       .code
[   3]        :                                       ;
[   4]        :                                       org 100h               ; ?????? PSP
[   5]        :                                       ;
[   6]    0100:                                       start:                     ;
[   7]    0100: E9 71 03                              	jmp main               ;
[   8]        :                                       ;
[   9]        :                                       
[  10]        :                                       maxCMDSize            equ 127
[  11]        :                                       maxBuffSize           equ 60
[  12]        :                                       clearValue            equ 80
[  13]        :                                       endl                  equ 0
[  14]    0103: 00                                    cmd_size              db  ?
[  15]    0104: 00 00 00 00 00 00 00 00 00 00 00 00   cmd_text              db  maxCMDSize + 2 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00          
[  16]    0185: 00 00 00 00 00 00 00 00 00 00 00 00   buffer                db  maxBuffSize + 2 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00                               
[  17]    01C3: 00 00 00 00 00 00 00 00 00 00 00 00   sourcePath            db  maxCMDSize + 2 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00          
[  18]        :                                       
[  19]    0244: 00 00                                 sourceID              dw  0
[  20]    0246: 00 00                                 filePosition          dw 0
[  21]    0248: 00 00                                 amount dw 0
[  22]        :                                       
[  23]    024A: 42 61 64 20 63 6F 6D 6D 61 6E 64 2D   badCMDArgsMessage     db "Bad command-line arguments! Only one argument is required", '$'
                6C 69 6E 65 20 61 72 67 75 6D 65 6E 
                74 73 21 20 4F 6E 6C 79 20 6F 6E 65 
                20 61 72 67 75 6D 65 6E 74 20 69 73 
                20 72 65 71 75 69 72 65 64 24       
[  24]        :                                       ;
[  25]    0284: 00 00 00 00                           intOldHandler dd 0                    ;
[  26]        :                                       
[  27]        :                                       ;**************************************************************************************************************************
[  28]    0288:                                       handler PROC                          ; ????? ?????????? ??????????
[  29]    0288: 9C                                    	pushf
[  30]    0289: 2E FF 16 84 02                        	call    cs:intOldHandler                           ;
[  31]    028E: 1E                                    	push ds                           ;
[  32]    028F: 06                                    push es                           ;
[  33]    0290: 50                                    	push ax                           ;
[  34]    0291: 53                                    	push bx                           ; ????????? ????????
[  35]    0292: 51                                    push cx                           ;
[  36]    0293: 52                                    push dx                           ;
[  37]    0294: 57                                    	push di                           ;
[  38]        :                                       ;
[  39]    0295: 0E                                    	push cs                           ;
[  40]    0296: 1F                                    	pop ds                            ;
[  41]        :                                       
[  42]    0297: E4 60                                 in  al, 60H
[  43]    0299: 3C 01                                 cmp al, 01h                       ; esc scan code
[  44]    029B: 75 03 E9 CC 00                        je escRoutine
[  45]    02A0: 3C 48                                 cmp al, 48h                       ; up scan code
[  46]    02A2: 74 10                                 je upRoutine
[  47]    02A4: 3C 50                                 cmp al, 50h                       ; down scan code
[  48]    02A6: 74 50                                 je downRoutine
[  49]        :                                       
[  50]    02A8: 5F                                    pop     di                       ; ?????????????? ?????????????? ?????????
[  51]    02A9: 5A                                    pop     dx
[  52]    02AA: 59                                    pop     cx
[  53]    02AB: 5B                                    pop     bx
[  54]    02AC: 58                                    pop     ax
[  55]    02AD: 07                                    pop     es
[  56]    02AE: 1F                                    pop     ds
[  57]    02AF: 2E FF 2E 84 02                        jmp dword ptr cs:intOldHandler   ;?? ?????? ??????
[  58]        :                                       
[  59]    02B4:                                       upRoutine:
[  60]    02B4: B4 3D                                 mov ah, 3Dh			        ; ??????? 3Dh - ??????? ???????????? ????
[  61]    02B6: B0 00                                 	mov al, 0			        ; ????? ???????? ?????
[  62]    02B8: BA C3 01                              	lea dx, sourcePath          ; ????????? ? dx ???????? ????????? ?????
[  63]    02BB: B9 00 00                              	mov cx, 0			        ;
[  64]    02BE: CD 21                                 	int 21h                     ;
[  65]        :                                       	
[  66]    02C0: 73 03 E9 90 00                        	jc noFileEnd
[  67]        :                                       	
[  68]    02C5: A3 44 02                              	mov sourceId, ax
[  69]        :                                       
[  70]    02C8: B0 00                                 mov al, 0                ;
[  71]    02CA: 8B 1E 44 02                           mov bx, sourceId
[  72]    02CE: B4 42                                 	mov ah, 42h              ; ?????????? ? ah ??? 42h - ?-??? DOS ????????? ????????? ?????
[  73]    02D0: B9 00 00                              	mov cx, 0
[  74]    02D3: 8B 16 46 02                           	mov dx, filePosition		
[  75]    02D7: CD 21                                 	int 21h                  ; ???????? ?????????? DOS ??? ?????????? ????????
[  76]        :                                       
[  77]    02D9: B4 3F                                 mov ah, 3Fh                     ; ????????? ? ah ??? 3Fh - ??? ?-??? ?????? ?? ?????
[  78]    02DB: 8B 1E 44 02                           	mov bx, sourceID                ; ? bx ????????? ID ?????, ?? ???????? ?????????? ?????????
[  79]    02DF: B9 3C 00                              	mov cx, maxBuffSize             ; ? cx ????????? ???????????? ?????? ?????, ?.?. ????????? ???????????? ???-?? ???????? (maxWordSize ????????)
[  80]    02E2: BA 85 01                              	lea dx, buffer                  ; ? dx ????????? ???????? ???????, ? ??????? ????? ????????? ?????? ?? ?????
[  81]    02E5: CD 21                                 	int 21h                         ; ???????? ?????????? ??? ?????????? ?-???
[  82]        :                                       
[  83]    02E7: 3D 00 00                              	cmp ax, 0
[  84]    02EA: 76 61                                 jbe endHandler
[  85]        :                                       
[  86]    02EC: E8 B1 00                              call printToVM
[  87]        :                                       
[  88]    02EF: 03 06 46 02                           add ax, filePosition
[  89]    02F3: A3 46 02                              mov filePosition, ax
[  90]        :                                       
[  91]    02F6: EB 55                                 jmp endHandler
[  92]        :                                       
[  93]    02F8:                                       downRoutine:
[  94]    02F8: B4 3D                                 mov ah, 3Dh			        ; ??????? 3Dh - ??????? ???????????? ????
[  95]    02FA: B0 00                                 	mov al, 0			        ; ????? ???????? ?????
[  96]    02FC: BA C3 01                              	lea dx, sourcePath          ; ????????? ? dx ???????? ????????? ?????
[  97]    02FF: B9 00 00                              	mov cx, 0			        ;
[  98]    0302: CD 21                                 	int 21h                     ;
[  99]        :                                       	
[ 100]    0304: 72 4F                                 	jc nofileEnd
[ 101]        :                                       	
[ 102]    0306: A3 44 02                              	mov sourceId, ax
[ 103]        :                                       	
[ 104]    0309: A1 46 02                              	mov ax, filePosition
[ 105]    030C: B9 3C 00                              	mov cx, maxBuffSize
[ 106]    030F: 83 C1 3C                              add cx, maxBuffSize	
[ 107]    0312: 3B C1                                 	cmp ax, cx
[ 108]    0314: 77 04                                 	ja subtract
[ 109]        :                                       
[ 110]    0316: 33 C0                                 	xor ax, ax
[ 111]    0318: EB 02                                 	jmp OK
[ 112]    031A:                                       subtract:	
[ 113]    031A: 2B C1                                 	sub ax, cx
[ 114]    031C:                                       OK:
[ 115]    031C: A3 46 02                              mov filePosition, ax
[ 116]        :                                       
[ 117]    031F: B0 00                                 mov al, 0                ;
[ 118]    0321: 8B 1E 44 02                           mov bx, sourceId
[ 119]    0325: B4 42                                 	mov ah, 42h              ; ?????????? ? ah ??? 42h - ?-??? DOS ????????? ????????? ?????
[ 120]    0327: B9 00 00                              	mov cx, 0
[ 121]    032A: 8B 16 46 02                           	mov dx, filePosition		
[ 122]    032E: CD 21                                 	int 21h                  ; ???????? ?????????? DOS ??? ?????????? ????????
[ 123]        :                                       
[ 124]    0330: B4 3F                                 mov ah, 3Fh                     ; ????????? ? ah ??? 3Fh - ??? ?-??? ?????? ?? ?????
[ 125]    0332: 8B 1E 44 02                           	mov bx, sourceID                ; ? bx ????????? ID ?????, ?? ???????? ?????????? ?????????
[ 126]    0336: B9 3C 00                              	mov cx, maxBuffSize             ; ? cx ????????? ???????????? ?????? ?????, ?.?. ????????? ???????????? ???-?? ???????? (maxWordSize ????????)
[ 127]    0339: BA 85 01                              	lea dx, buffer                  ; ? dx ????????? ???????? ???????, ? ??????? ????? ????????? ?????? ?? ?????
[ 128]    033C: CD 21                                 	int 21h                         ; ???????? ?????????? ??? ?????????? ?-???
[ 129]        :                                       
[ 130]    033E: 3D 00 00                              	cmp ax, 0
[ 131]    0341: 76 0A                                 jbe endHandler
[ 132]        :                                       
[ 133]    0343: E8 5A 00                              call printToVM
[ 134]        :                                       
[ 135]    0346: 03 06 46 02                           add ax, filePosition
[ 136]    034A: A3 46 02                              mov filePosition, ax
[ 137]        :                                       
[ 138]    034D:                                       endHandler:
[ 139]    034D: B4 3E                                 mov ah, 3Eh                 ; ????????? ? ah ??? 3Eh - ??? ???????? ?????
[ 140]    034F: 8B 1E 44 02                           	mov bx, sourceID            ; ? bx ????????? ID ?????, ??????????? ????????
[ 141]    0353: CD 21                                 	int 21h
[ 142]        :                                       	                     ; ???????? ?????????? ??? ??????????
[ 143]    0355:                                       nofileEnd:
[ 144]    0355: E4 61                                 in al,61h ;?????? ?????????? ????? ?
[ 145]    0357: 0C 80                                 or al,80h ;?????????? ????? ????, ???????
[ 146]    0359: E6 61                                 out 61h,al ;??? 80h ? ??????????? ????? ?
[ 147]    035B: 24 7F                                 and al,7Fh ;????? ???????? ?????? ??????????.
[ 148]    035D: E6 61                                 out 61h,al ;??????? ? ????? ? ??? 80h .
[ 149]        :                                       ;
[ 150]    035F: B0 20                                 mov al, 20h                       ;
[ 151]    0361: E6 20                                 out 20h, al                       ;
[ 152]        :                                       
[ 153]    0363: 5F                                    	pop di                            ;
[ 154]    0364: 5A                                    	pop dx                            ;
[ 155]    0365: 59                                    	pop cx                            ;
[ 156]    0366: 5B                                    	pop bx                            ; ??????????????? ????????
[ 157]    0367: 58                                    	pop ax                            ;
[ 158]    0368: 07                                    	pop es                            ;
[ 159]    0369: 1F                                    	pop ds	
[ 160]    036A: EB 33                                 	jmp intEnd
[ 161]        :                                       
[ 162]    036C:                                       escRoutine:
[ 163]        :                                       ;??????????????? ?????? 09h
[ 164]        :                                       	
[ 165]    036C: E4 61                                 	in al,61h ;?????? ?????????? ????? ?
[ 166]    036E: 0C 80                                 or al,80h ;?????????? ????? ????, ???????
[ 167]    0370: E6 61                                 out 61h,al ;??? 80h ? ??????????? ????? ?
[ 168]    0372: 24 7F                                 and al,7Fh ;????? ???????? ?????? ??????????.
[ 169]    0374: E6 61                                 out 61h,al ;??????? ? ????? ? ??? 80h .
[ 170]        :                                       ;
[ 171]    0376: B0 20                                 mov al, 20h                       ;
[ 172]    0378: E6 20                                 out 20h, al                       ;
[ 173]        :                                       
[ 174]    037A: 5F                                    	pop di                            ;
[ 175]    037B: 5A                                    	pop dx                            ;
[ 176]    037C: 59                                    	pop cx                            ;
[ 177]    037D: 5B                                    	pop bx                            ; ??????????????? ????????
[ 178]    037E: 58                                    	pop ax                            ;
[ 179]    037F: 07                                    	pop es                            ;
[ 180]    0380: 1F                                    	pop ds	
[ 181]        :                                       	
[ 182]    0381: B8 09 25                              mov ax,2509h
[ 183]    0384: 2E 8B 16 84 02                        mov dx,word ptr cs:[intOldHandler]
[ 184]    0389: 2E 8E 1E 86 02                        mov ds,word ptr cs:[intOldHandler+2]
[ 185]    038E: CD 21                                 int 21h
[ 186]        :                                       
[ 187]    0390: 2E 8E 06 2C 00                        mov es,cs:2ch ; ??????? ?? PSP ????? ????????????
[ 188]    0395: B4 49                                 mov ah,49h ; ????????? ????????? ? ???????? ???
[ 189]    0397: CD 21                                 int 21h ;
[ 190]        :                                       
[ 191]    0399: 0E                                    push cs ; ???????? ?????? ???? ?????????
[ 192]    039A: 07                                    pop es ;
[ 193]    039B: B4 49                                 mov ah,49h ;
[ 194]    039D: CD 21                                 int 21h ;
[ 195]        :                                       
[ 196]    039F:                                       intEnd:
[ 197]    039F: CF                                    	iret                              ;
[ 198]        :                                       ENDP                                  ;
[ 199]        :                                       ;**************************************************************************************************************************
[ 200]        :                                       
[ 201]        :                                       
[ 202]        :                                       ;**************************************************************************************************************************
[ 203]        :                                       ;ax -- ????? ????????? ??? ?????? ?? ?????
[ 204]    03A0:                                       printToVM proc
[ 205]    03A0: 50                                    push ax
[ 206]    03A1: 53                                    push bx
[ 207]    03A2: 51                                    push cx
[ 208]    03A3: 52                                    push dx
[ 209]    03A4: 56                                    push si
[ 210]    03A5: 57                                    push di
[ 211]        :                                       
[ 212]    03A6: A3 48 02                              mov amount, ax
[ 213]        :                                       
[ 214]    03A9: B8 00 B8                              mov ax, 0b800h
[ 215]    03AC: 8E C0                                 mov es, ax
[ 216]    03AE: BF 00 00                              mov di, 0
[ 217]        :                                       
[ 218]    03B1: B9 50 00                              mov cx, clearValue
[ 219]    03B4:                                       loopClear:
[ 220]    03B4: B0 20                                 mov al, ' '
[ 221]    03B6: 26 88 05                              mov es:[di], al
[ 222]    03B9: 83 C7 02                              add di, 2
[ 223]    03BC: E2 F6                                 loop loopClear
[ 224]        :                                       
[ 225]    03BE: BE 85 01                              lea si, buffer
[ 226]    03C1: BF 00 00                              mov di, 0
[ 227]        :                                       
[ 228]    03C4: 8B 0E 48 02                           mov cx, amount
[ 229]    03C8:                                       loop2:
[ 230]    03C8: 8A 04                                 mov al, [si]
[ 231]    03CA: 26 88 05                              mov es:[di], al
[ 232]    03CD: 46                                    inc si
[ 233]    03CE: 83 C7 02                              add di, 2
[ 234]    03D1: E2 F5                                 loop loop2
[ 235]        :                                       
[ 236]    03D3: 5F                                    pop di
[ 237]    03D4: 5E                                    pop si
[ 238]    03D5: 5A                                    pop dx
[ 239]    03D6: 59                                    pop cx
[ 240]    03D7: 5B                                    pop bx
[ 241]    03D8: 58                                    pop ax
[ 242]    03D9: C3                                    ret
[ 243]        :                                       endp
[ 244]        :                                       ;*************************************************************************************************************************
[ 245]        :                                       
[ 246]    03DA:                                       programLength:
[ 247]        :                                       
[ 248]        :                                       ;**************************************************************************************************************************
[ 249]        :                                       println MACRO info          ;
[ 250]        :                                       	push ax                 ;
[ 251]        :                                       	push dx                 ;
[ 252]        :                                       ;
[ 253]        :                                       	mov ah, 09h             ; ??????? ??????
[ 254]        :                                       	lea dx, info            ; ???????? ? dx ???????? ?????????? ?????????
[ 255]        :                                       	int 21h                 ; ????? ??????????? ??? ?????????? ??????
[ 256]        :                                       	                        ;
[ 257]        :                                       	 mov dl, 0Ah            ; ?????? ???????? ?? ????? ??????
[ 258]        :                                       	mov ah, 02h             ; ??????? ?????? ???????
[ 259]        :                                       	int 21h                 ; ????? ??????????
[ 260]        :                                       ;
[ 261]        :                                       	mov dl, 0Dh             ; ?????? ???????? ? ?????? ??????
[ 262]        :                                       	mov ah, 02h             ;
[ 263]        :                                       	int 21h                 ;            ==//==
[ 264]        :                                       ;
[ 265]        :                                       	pop dx                  ;
[ 266]        :                                       	pop ax                  ;
[ 267]        :                                       ENDM
[ 268]        :                                       ;**************************************************************************************************************************
[ 269]        :                                       
[ 270]        :                                       ;********************************************************************************************************************
[ 271]    03DA:                                       parseCMD PROC                         ;
[ 272]    03DA: 53                                    	push bx                           ;
[ 273]    03DB: 51                                    	push cx                           ;
[ 274]    03DC: 52                                    	push dx                           ; ????????? ???????? ?????????
[ 275]    03DD: 56                                    	push si                           ;
[ 276]    03DE: 57                                    	push di                           ;
[ 277]        :                                       ;
[ 278]    03DF: FC                                    	cld                               ;
[ 279]    03E0: BB 80 00                              	mov bx, 80h                       ;
[ 280]    03E3: 2E 8A 0F                              	mov cl, cs:[bx]                   ; ????????? ? ????????, ??? ?????????? ????? ????????? ??????
[ 281]    03E6: 32 ED                                 	xor ch, ch                        ; ? cl ????????? ????? ????????? ??????
[ 282]        :                                       ;
[ 283]    03E8: 33 D2                                 	xor dx, dx                        ;
[ 284]    03EA: BF 81 00                              	mov di, 81h                       ;
[ 285]        :                                       ;
[ 286]    03ED: B0 20                                 	mov al, ' '                       ; ?????????? ??? ???????
[ 287]    03EF: F2 AE                                 	repne scasb	                      ; ????? ????, ?? ?????? al ? ????? ?? cx ???? ?? ?????? es:di
[ 288]        :                                       	
[ 289]    03F1: B0 20                                 	mov al, ' '
[ 290]    03F3: F3 AE                                 repe scasb
[ 291]    03F5: 4F                                    dec di
[ 292]    03F6: 41                                    inc cx
[ 293]        :                                       	
[ 294]    03F7: 33 C0                                 	xor ax, ax                        ;
[ 295]        :                                       ;
[ 296]    03F9: 8B F7                                 	mov si, di                        ; ????????? ? si ????????, ? ???????? ?????????? ?????????
[ 297]    03FB: BF C3 01                              	mov di, offset sourcePath          ; ???????? ??????? ? sourcePath
[ 298]        :                                       	
[ 299]    03FE: 8A 04                                 	mov al, [si]
[ 300]    0400: 3C 20                                 	cmp al, ' '
[ 301]    0402: 74 14                                 je badCMDArgs
[ 302]    0404: 3C 0D                                 cmp al, 0Dh
[ 303]    0406: 74 10                                 je badCMDArgs
[ 304]        :                                       	
[ 305]    0408:                                       loop1:
[ 306]    0408: 8A 04                                 mov al, [si]
[ 307]    040A: 3C 20                                 cmp al, ' '
[ 308]    040C: 74 25                                 je endFound
[ 309]    040E: 3C 0D                                 cmp al, 0Dh
[ 310]    0410: 74 21                                 je endFound
[ 311]        :                                       
[ 312]    0412: 88 05                                 mov [di], al
[ 313]    0414: 47                                    inc di
[ 314]    0415: 46                                    inc si
[ 315]    0416: EB F0                                 jmp loop1
[ 316]        :                                       
[ 317]    0418:                                       badCMDArgs:
[ 318]    0418: 50 52 B4 09 BA 4A 02 CD 21 B2 0A B4   println badCMDArgsMessage
                02 CD 21 B2 0D B4 02 CD 21 5A 58    
[ 319]    042F: 33 C0                                 xor ax, ax
[ 320]    0431: EB 07                                 jmp endParse
[ 321]        :                                       
[ 322]    0433:                                       endFound:
[ 323]    0433: B0 00                                 mov al, endl
[ 324]    0435: 88 05                                 mov [di], al                ; ????????? ?????? ????? ?????? ? ?????????????? ??????
[ 325]    0437: B8 00 00                              mov ax, 0
[ 326]        :                                       
[ 327]    043A:                                       endParse:                       ;
[ 328]    043A: 5F                                    	pop di
[ 329]    043B: 5E                                    	pop si
[ 330]    043C: 5A                                    	pop dx                      ; ??????????????? ????????
[ 331]    043D: 59                                    	pop cx                      ;
[ 332]    043E: 5B                                    	pop bx                      ;
[ 333]    043F: C3                                    	ret                         ;
[ 334]        :                                       endp
[ 335]        :                                       ;********************************************************************************************************************   	
[ 336]        :                                       	
[ 337]        :                                       	
[ 338]        :                                       ;
[ 339]        :                                       ;********************************************************************************************************************
[ 340]    0440:                                       setHandler PROC                       ; ????????? ?????? ??????????? ??????????. ????????? ax=0 ???? ??? ??????, ????? ax!=0
[ 341]    0440: 53                                    	push bx                           ;
[ 342]    0441: 52                                    	push dx                           ; ????????? ???????? ?????????
[ 343]        :                                       ;
[ 344]    0442: FA                                    	cli                               ; ????????? ?????????? (??????/?????????? ?????????? ??? ?????????? ????????? ?????? ??????????? )
[ 345]        :                                       ;
[ 346]    0443: B4 35                                 	mov ah, 35h                       ; ??????? ????????? ?????? ??????????? ??????????
[ 347]    0445: B0 09                                 	mov al, 09h                       ; ??????????, ?????????? ???????? ?????????? ???????? (09h - ?????????? ??????????)
[ 348]    0447: CD 21                                 	int 21h                           ; ???????? ?????????? ??? ????????? ???????
[ 349]        :                                       ; ? ?????????? ?????????? ??????? ? es:bx ?????????? ????? ???????? ??????????? ??????????
[ 350]        :                                       ;
[ 351]        :                                       	                                  ; ????????? ?????? ??????????
[ 352]    0449: 89 1E 00 00                           	mov word ptr [offset intOldHandler], bx     ; ????????
[ 353]    044D: 8C 06 00 00                           	mov word ptr [offset intOldHandler + 2], es ; ???????
[ 354]        :                                       ;
[ 355]    0451: 1E                                    	push ds			                  ; ????????? ???????? ds
[ 356]    0452: 07                                    	pop es                            ; ??????????????? ???????? es
[ 357]        :                                       ;
[ 358]    0453: B4 25                                 	mov ah, 25h                       ; ??????? ?????? ??????????? ??????????
[ 359]    0455: B0 09                                 	mov al, 09h                       ; ??????????, ????????? ???????? ????? ???????
[ 360]    0457: BA 88 02                              	mov dx, offset handler            ; ????????? ? dx ???????? ?????? ??????????? ??????????, ??????? ????? ?????????? ?? ????? ??????? ???????????
[ 361]    045A: CD 21                                 	int 21h                           ; ???????? ?????????? ??? ?????????? ???????
[ 362]        :                                       ;
[ 363]    045C: FB                                    	sti                               ; ????????? ??????????
[ 364]        :                                       ;
[ 365]    045D: B8 00 00                              	mov ax, 0                         ; ????????? ? ax - 0, ?.?. ?????? ?? ?????????
[ 366]        :                                       ;
[ 367]    0460: 5A                                    	pop dx                            ; ??????????????? ???????? ????????? ? ????????? ??????? ?? ?????????
[ 368]    0461: 5B                                    	pop bx                            ;
[ 369]    0462: C3                                    	ret                               ;
[ 370]        :                                       ENDP                                  ;
[ 371]        :                                       ;
[ 372]    0463:                                       newline PROC                          ;
[ 373]    0463: 50                                    	push ax                           ; ????????? ???????? ?????????
[ 374]    0464: 52                                    	push dx                           ;
[ 375]        :                                       ;
[ 376]    0465: B2 0A                                 	mov dl, 10                        ;	????????? ? dx ??????????????? ???? ???????? ??????? 0Ah(10) ? 0Dh(13) ??? ???????? ?? ????? ??????
[ 377]    0467: B4 02                                 	mov ah, 02h                       ; ????????? ? ax ??? 02h - ??? ???????? ?????? ???????
[ 378]    0469: CD 21                                 	int 21h                           ; ???????? ?????????? ??? ?????? ???????
[ 379]        :                                       ;
[ 380]    046B: B2 0D                                 	mov dl, 13                        ;
[ 381]    046D: B4 02                                 	mov ah, 02h                       ; ==//==
[ 382]    046F: CD 21                                 	int 21h                           ;
[ 383]        :                                       ;
[ 384]    0471: 5A                                    	pop dx                            ; ??????????????? ??????? ?????????
[ 385]    0472: 58                                    	pop ax                            ;
[ 386]    0473: C3                                    	ret                               ;
[ 387]        :                                       ENDP                                  ;
[ 388]        :                                       
[ 389]    0474:                                       main:
[ 390]    0474: E8 63 FF                              	call parseCMD                     ; ?????? ????????? ??????
[ 391]    0477: 3D 00 00                              	cmp ax, 0                         ; ???? ???????? ?????? - ???????
[ 392]    047A: 75 11                                 	jne endMain                       ;
[ 393]        :                                       ;
[ 394]    047C: E8 C1 FF                              	call setHandler                   ; ????????????? ????? ?????????? ??????????
[ 395]    047F: 3D 00 00                              	cmp ax, 0                         ; ???? ???????? ?????? - ???????
[ 396]    0482: 75 09                                 	jne endMain				          ;
[ 397]        :                                       ;
[ 398]    0484: B4 31                                 	mov ah, 31h                       ; ????????? ????????? ???????????
[ 399]    0486: B0 00                                 	mov al, 0                         ;
[ 400]        :                                       	                                  ;
[ 401]    0488: BA 3F 00                              	mov dx, (programLength - start + 10Fh) / 16 + 1 ; ??????? ? dx ?????? ????????? + PSP,
[ 402]        :                                       	                                  ; ????? ??  16, ?.?. ? dx ?????????? ??????? ?????? ? 16 ??????? ??????????
[ 403]    048B: CD 21                                 	int 21h                           ;
[ 404]        :                                       ;
[ 405]    048D:                                       endMain:                              ;
[ 406]    048D: C3                                    	ret                               ;                               ;
[ 407]        :                                       end start                             ;
[ 408]        :                                       
 
===================================================================================================
 




===================================================================================================
